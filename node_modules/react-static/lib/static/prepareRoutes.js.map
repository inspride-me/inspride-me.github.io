{"version":3,"sources":["../../src/static/prepareRoutes.js"],"names":["config","opts","silent","cb","d","beforePrepareRoutes","plugins","console","log","process","env","REACT_STATIC_ROUTES_PATH","path","join","paths","DIST","chalk","green","routes","templates","afterPrepareRoutes","prepareRoutes"],"mappings":";;;;;;;;;;;;;;;AAAA;;AACA;;AAEA;;AACA;;AACA;;AACA;;;;;;;;;;;;;4BAIgB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACZA,YAAAA,MADY,QACZA,MADY,EACJC,IADI,QACJA,IADI,EACEC,MADF,QACEA,MADF;AAEdC,YAAAA,EAFc,8DAET,UAAAC,CAAC;AAAA,qBAAIA,CAAJ;AAAA,aAFQ;AAIRC,YAAAA,mBAJQ,GAIc,4BAC1BL,MAAM,CAACM,OADmB,EAE1B,qBAF0B,CAJd;AAAA;AAAA,mBAQCD,mBAAmB,CAACL,MAAD,CARpB;;AAAA;AAQdA,YAAAA,MARc;AAUd,gBAAI,CAACE,MAAL,EAAaK,OAAO,CAACC,GAAR,CAAY,uBAAZ,EAVC,CAWd;;AACAC,YAAAA,OAAO,CAACC,GAAR,CAAYC,wBAAZ,GAAuCC,cAAKC,IAAL,CACrCb,MAAM,CAACc,KAAP,CAAaC,IADwB,EAErC,2BAFqC,CAAvC;AAKA,gBAAI,CAACb,MAAL,EAAa,iBAAKc,eAAMC,KAAN,CAAY,0BAAZ,CAAL;AAjBC;AAAA,mBAkBR,wBACJ;AACEjB,cAAAA,MAAM,EAANA,MADF;AAEEC,cAAAA,IAAI,EAAJA;AAFF,aADI;AAAA;AAAA;AAAA;AAAA;AAAA,wCAKJ,iBAAMiB,MAAN;AAAA;AAAA;AAAA;AAAA;AACE,4BAAI,CAAChB,MAAL,EAAa,oBAAQc,eAAMC,KAAN,CAAY,0BAAZ,CAAR;AACbjB,wBAAAA,MAAM,CAACkB,MAAP,GAAgBA,MAAhB;AACAlB,wBAAAA,MAAM,CAACmB,SAAP,GAAmB,+BAAiBnB,MAAjB,CAAnB;AAHF,yDAISG,EAAE,CAACH,MAAD,CAJX;;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,eALI;;AAAA;AAAA;AAAA;AAAA,gBAlBQ;;AAAA;AA+BRoB,YAAAA,kBA/BQ,GA+Ba,4BACzBpB,MAAM,CAACM,OADkB,EAEzB,oBAFyB,CA/Bb;AAAA;AAAA,mBAmCCc,kBAAkB,CAACpB,MAAD,CAnCnB;;AAAA;AAmCdA,YAAAA,MAnCc;AAAA,8CAoCPA,MApCO;;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,G;;WAAeqB,a;;;;SAAAA,a","sourcesContent":["import path from 'path'\nimport chalk from 'chalk'\n\nimport extractTemplates from './extractTemplates'\nimport getRoutes from './getRoutes'\nimport buildXML from './buildXML'\nimport { makeHookReducer, time, timeEnd } from '../utils'\n\nexport { buildXML }\n\nexport default (async function prepareRoutes(\n  { config, opts, silent },\n  cb = d => d\n) {\n  const beforePrepareRoutes = makeHookReducer(\n    config.plugins,\n    'beforePrepareRoutes'\n  )\n  config = await beforePrepareRoutes(config)\n\n  if (!silent) console.log('=> Building Routes...')\n  // set the static routes\n  process.env.REACT_STATIC_ROUTES_PATH = path.join(\n    config.paths.DIST,\n    'react-static-templates.js'\n  )\n\n  if (!silent) time(chalk.green('=> [\\u2713] Routes Built'))\n  await getRoutes(\n    {\n      config,\n      opts,\n    },\n    async routes => {\n      if (!silent) timeEnd(chalk.green('=> [\\u2713] Routes Built'))\n      config.routes = routes\n      config.templates = extractTemplates(config)\n      return cb(config)\n    }\n  )\n\n  const afterPrepareRoutes = makeHookReducer(\n    config.plugins,\n    'afterPrepareRoutes'\n  )\n  config = await afterPrepareRoutes(config)\n  return config\n})\n"],"file":"prepareRoutes.js"}